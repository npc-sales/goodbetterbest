<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="application-name" content="NPC Screen Repair Configurator">
<meta property="og:title" content="North Point Computers - Screen Repairs">
<meta name="twitter:title" content="North Point Computers - Screen Repairs">
<style>
  :root { color-scheme: light; --bg:#f6f7fb; --card:#fff; --border:#d8ddea; --border-strong:#cfd3dc; --accent:#1e66ff; --accent-soft:rgba(30,102,255,.1); --text:#11151c; --muted:#5b6472; --divider:#eef1f7; --note-bg:#fff8e6; --note-border:#ffe5a3; --error:#b00020; --success:#0f9d58; }
  *{box-sizing:border-box} html,body{margin:0;padding:0;font-family:"SF Pro Text",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
  h1{font-size:24px;margin:0 0 10px} h2{font-size:18px;margin:0} h3{font-size:18px;margin:0} p{margin:0}
  .wrap{max-width:1080px;margin:0 auto;padding:16px}
  .intro{margin-bottom:16px;color:var(--muted);font-size:14px}
  .grid{display:grid;gap:14px;grid-template-columns:1fr} @media(min-width:900px){.grid{grid-template-columns:1.2fr .8fr;align-items:start}}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 2px 8px rgba(17,17,17,.04);overflow:hidden}
  .card h2{padding:18px 20px 0} .card .section{padding:16px 20px;border-top:1px solid var(--divider)}
  label.head{display:block;font-weight:600;margin-bottom:8px;font-size:15px}
  select{width:100%;appearance:none;-webkit-appearance:none;border:1px solid var(--border);border-radius:11px;padding:12px 14px;font-size:15px;background:var(--card);color:var(--text);box-shadow:0 1px 0 rgba(17,17,17,.03)}
  #modelSelect{font-size:22.5px;font-weight:600} select:focus{outline:3px solid rgba(30,102,255,.25);border-color:var(--accent)}
  .hint{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.4}
  .tabs{display:flex;gap:10px;padding:0 20px 18px;flex-wrap:wrap}
  .tab{flex:1 1 160px;text-align:center;padding:14px 12px;border:1px solid var(--border-strong);border-radius:12px;font-weight:600;cursor:pointer;transition:all .15s ease;background:var(--card);box-shadow:0 1px 2px rgba(17,17,17,.04)}
  .tab small{display:block;font-size:12px;color:var(--muted);margin-top:6px;font-weight:500}
  .tab.active{border-color:var(--accent);box-shadow:0 0 0 2px var(--accent-soft) inset,0 6px 20px rgba(30,102,255,.12)}
  .tab:not(.active):hover{border-color:var(--accent)}
  .tier-indicator{margin:-8px 20px 16px;padding:12px 16px;background:#eaf3ff;border:1px solid #cfe2ff;border-radius:12px;display:flex;justify-content:space-between;gap:16px;align-items:center;font-size:14px}
  .tier-indicator strong{font-size:15px}
  .radio-list,.check-list{display:grid;gap:10px}
  .radio-item,.check-item{border:1px solid var(--border);border-radius:12px;padding:14px;display:flex;gap:14px;align-items:flex-start;cursor:pointer;transition:border .15s ease,box-shadow .15s ease}
  .radio-item input,.check-item input{margin-top:3px}
  .radio-item.active,.check-item input:checked+label .row{border-color:var(--accent)}
  .radio-item.active{box-shadow:0 0 0 2px var(--accent-soft);border-color:var(--accent)}
  .radio-item label,.check-item label{flex:1;cursor:pointer}
  .row{display:flex;justify-content:space-between;gap:10px;align-items:center;font-size:14px}
  .row strong{font-size:15px} .price-chip{font-weight:700}
  .summary{position:sticky;top:16px} .summary .section{display:flex;flex-direction:column;gap:12px}
  .summary .line{display:flex;justify-content:space-between;font-size:14px;gap:12px}
  .summary .line span:first-child{color:var(--muted)} #summaryModel{font-size:21px;font-weight:700}
  .summary .total{font-size:22px;font-weight:800;margin-top:4px}
  .summary .note{background:var(--note-bg);border:1px solid var(--note-border);color:#5c4700;padding:10px 12px;border-radius:10px;font-size:12px;line-height:1.5}
  .divider{height:1px;background:var(--divider)}
  .cta-wrap{display:flex;flex-direction:column;gap:8px}
  .btn-primary{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:14px 18px;border-radius:12px;border:0;background:var(--accent);color:#fff;font-size:16px;font-weight:700;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease}
  .btn-primary:hover{transform:translateY(-1px);box-shadow:0 8px 22px rgba(30,102,255,.22)}
  .btn-primary[disabled]{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}
  .btn-paypal{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:13px 18px;border-radius:12px;border:1px solid #003087;background:linear-gradient(135deg,#ffc439,#f7b600);color:#003087;font-size:15px;font-weight:700;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease;text-decoration:none}
  .btn-paypal:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,48,135,.18)}
  .btn-paypal[disabled]{opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}
  .btn-secondary{background:transparent;border:0;color:var(--muted);font-size:13px;text-decoration:underline;cursor:pointer}
  .status{font-size:13px;line-height:1.4;border-radius:10px;padding:10px 12px}
  .status.error{background:#ffe5e9;color:var(--error);border:1px solid rgba(176,0,32,.3)}
  .status.success{background:#e8f5ed;color:var(--success);border:1px solid rgba(15,157,88,.35)}
  .status.hidden{display:none}
  .addon-grid{display:grid;gap:10px} @media(min-width:620px){.addon-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
  .floating-total{position:fixed;right:24px;bottom:24px;background:var(--card);color:var(--text);padding:18px;border-radius:18px;box-shadow:0 18px 40px rgba(17,17,17,.15);border:1px solid var(--border);display:flex;flex-direction:column;gap:10px;z-index:1000;width:280px;max-width:calc(100vw - 48px)}
  .floating-total .floating-checkout{width:100%;display:flex;flex-direction:column;align-items:flex-start;gap:6px;text-align:left}
  .floating-total .floating-checkout span.label{font-size:13px;letter-spacing:.02em}
  .floating-total .floating-checkout span.amount{font-size:20px;font-weight:800;margin-left:auto}
  .floating-total .floating-pay{width:100%}
  @media(min-width:901px){.floating-total{display:none}}
  @media(max-width:900px){body{padding-bottom:200px}.floating-total{left:16px;right:16px;bottom:16px;width:auto}}
</style>
</head>
<body>
<div class="wrap">
  <p class="intro">Choose the repair tier that fits you best, add any extras, then continue to secure checkout on Lowbies.com.</p>

  <div class="grid">
    <div class="card">
      <h2>Configure your repair</h2>
      <div class="tabs" role="tablist">
        <div class="tab active" id="tab-better" role="tab" tabindex="0" aria-selected="true" aria-controls="panel-tier" data-tier="better">Standard<small>33-Day Warranty</small></div>
        <div class="tab" id="tab-good" role="tab" tabindex="0" aria-selected="false" aria-controls="panel-tier" data-tier="good">Discount<small>No Warranty</small></div>
        <div class="tab" id="tab-premium" role="tab" tabindex="0" aria-selected="false" aria-controls="panel-tier" data-tier="premium">Premium<small>183-Day Warranty</small></div>
      </div>
      <div class="tier-indicator" id="tierIndicator">
        <div>
          <strong id="tierIndicatorTitle">Standard — 33-Day Warranty</strong>
          <div id="tierIndicatorCopy">Baseline option with balanced coverage and price.</div>
        </div>
        <div id="tierIndicatorMath">Discount −$19 · Premium +$20</div>
      </div>

      <div class="section" id="panel-tier">
        <label for="modelSelect" class="head">iPhone model</label>
        <select id="modelSelect"></select>
        <div class="hint">Pricing covers all colors and storage options.</div>
      </div>

      <div class="section">
        <label class="head">Screen quality</label>
        <div class="radio-list" id="qualityOptions"></div>
        <div class="hint">OEM-Match OLED is available on select devices.</div>
      </div>

      <div class="section">
        <label class="head">Priority service</label>
        <div class="radio-list" id="priorityOptions"></div>
      </div>

      <div class="section">
        <label class="head">Add-ons</label>
        <div class="addon-grid" id="addonOptions"></div>
      </div>

      <div class="section">
        <div class="note" id="warrantyNote"></div>
      </div>
    </div>

    <aside class="card summary" aria-live="polite">
      <h3 style="padding:18px 20px 0;">Live summary</h3>
      <div class="section">
        <div class="line"><span>Model</span><span id="summaryModel">—</span></div>
        <div class="line"><span>Tier &amp; warranty</span><span id="summaryTier">—</span></div>
        <div class="line"><span>Screen quality</span><span id="summaryQuality">—</span></div>
        <div class="line"><span>Priority</span><span id="summaryPriority">—</span></div>
        <div class="line"><span>Add-ons</span><span id="summaryAddons">None</span></div>
        <div class="divider"></div>
        <div class="line"><span>Base</span><span id="priceBase">$0.00</span></div>
        <div class="line"><span>Screen quality</span><span id="priceQuality">$0.00</span></div>
        <div class="line"><span>Priority</span><span id="pricePriority">$0.00</span></div>
        <div class="line"><span>Add-ons</span><span id="priceAddons">$0.00</span></div>
        <div class="divider"></div>
        <div class="total" id="priceTotal">$0.00</div>
        <div class="note" id="summaryWarranty"></div>
        <div class="cta-wrap">
          <button class="btn-primary" id="checkoutBtn" type="button">Continue to Pay on Lowbies.com</button>
          <button class="btn-paypal" id="paypalBtn" type="button"><span id="paypalBtnLabel">Pay with credit card or PayPal</span></button>
          <button class="btn-secondary" id="resetBtn" type="button">Reset choices</button>
          <div class="status hidden" id="checkoutStatus" role="status"></div>
        </div>
      </div>
    </aside>
  </div>

  <div class="floating-total" id="floatingTotal" aria-live="polite">
    <button class="btn-primary floating-checkout" id="floatingCheckoutBtn" type="button">
      <span class="label" id="floatingCheckoutLabel">Continue to Pay on Lowbies.com</span>
      <span class="amount" id="floatingTotalAmount">$0.00</span>
    </button>
    <button class="floating-pay" id="floatingPayBtn" type="button">Pay with credit card or PayPal</button>
  </div>
</div>

<script>
(function(){
  // ——— Data (match your bridge arrays) ———
  var models = [
    {id:'6',label:'iPhone 6'}, {id:'6 Plus',label:'iPhone 6 Plus'},
    {id:'6s',label:'iPhone 6s'}, {id:'6s Plus',label:'iPhone 6s Plus'},
    {id:'7',label:'iPhone 7'}, {id:'7 Plus',label:'iPhone 7 Plus'},
    {id:'8',label:'iPhone 8'}, {id:'8 Plus',label:'iPhone 8 Plus'},
    {id:'X',label:'iPhone X'}, {id:'XR',label:'iPhone XR'},
    {id:'11',label:'iPhone 11'},
    {id:'12',label:'iPhone 12'}, {id:'12 Pro',label:'iPhone 12 Pro'}, {id:'12 Pro Max',label:'iPhone 12 Pro Max'},
    {id:'13 Mini',label:'iPhone 13 Mini'}, {id:'13',label:'iPhone 13'}, {id:'13 Pro',label:'iPhone 13 Pro'}, {id:'13 Pro Max',label:'iPhone 13 Pro Max'},
    {id:'14',label:'iPhone 14'}, {id:'14 Plus',label:'iPhone 14 Plus'}, {id:'14 Pro',label:'iPhone 14 Pro'}, {id:'14 Pro Max',label:'iPhone 14 Pro Max'},
    {id:'15',label:'iPhone 15'}, {id:'15 Plus',label:'iPhone 15 Plus'}, {id:'15 Pro',label:'iPhone 15 Pro'}, {id:'15 Pro Max',label:'iPhone 15 Pro Max'},
    {id:'16',label:'iPhone 16'}, {id:'16 Plus',label:'iPhone 16 Plus'}, {id:'16 Pro',label:'iPhone 16 Pro'}, {id:'16 Pro Max',label:'iPhone 16 Pro Max'}
  ];

  var baseBetter = {"6":99,"6 Plus":99,"6s":99,"6s Plus":99,"7":99,"7 Plus":99,"8":99,"8 Plus":99,"X":99,"XR":99,
    "11":139,"12":139,"12 Pro":169,"12 Pro Max":209,"13 Mini":149,"13":149,"13 Pro":169,"13 Pro Max":209,
    "14":149,"14 Plus":149,"14 Pro":169,"14 Pro Max":209,"15":149,"15 Plus":149,"15 Pro":169,"15 Pro Max":209,
    "16":149,"16 Plus":149,"16 Pro":169,"16 Pro Max":209};

  var oledSurcharge = {"6":null,"6 Plus":null,"6s":null,"6s Plus":null,"7":null,"7 Plus":null,"8":null,"8 Plus":null,"X":null,"XR":null,"11":null,
    "12":99,"12 Pro":99,"12 Pro Max":129,"13 Mini":139,"13":109,"13 Pro":189,"13 Pro Max":219,"14":119,"14 Plus":179,"14 Pro":249,"14 Pro Max":349,
    "15":249,"15 Plus":209,"15 Pro":359,"15 Pro Max":439,"16":299,"16 Plus":409,"16 Pro":449,"16 Pro Max":529};

  var priorityOptions = [
    { id:'standard', label:'Standard Queue', price:0,  description:'Typical 1–3 business days.' },
    { id:'priority', label:'Priority',       price:39, description:'Move ahead of standard jobs.' },
    { id:'priority_plus', label:'Priority+', price:59, description:'Front-of-line service.' },
    { id:'priority_pro',  label:'Priority Pro', price:99, description:'Drop-everything level.' }
  ];

  // Front-end add-ons → bridge keys
  var addonOptions = [
    { id:'battery',   bridge:'batt',  label:'Battery Replacement',  price:79, description:'New battery with screen repair.' },
    { id:'cleaning',  bridge:'clean', label:'Charge Port Cleaning',  price:50, description:'Deep clean for charging/data port.' },
    { id:'port',      bridge:'port',  label:'Charge Port Replacement', price:89, description:'Full port swap.' },
    { id:'protector', bridge:'prot',  label:'Screen Protector Install', price:10, description:'Tempered glass protector.' }
  ];

  var tierCopy = {
    good:{title:'Discount — No Warranty', copy:'Best for tight budgets.', note:'No warranty at Discount tier.'},
    better:{title:'Standard — 33-Day Warranty', copy:'Balanced coverage.', note:'33-day warranty on parts & labor.'},
    premium:{title:'Premium — 183-Day Warranty', copy:'Max peace of mind.', note:'183-day warranty; priority support.'}
  };

  var state = { model: models[0], tier:'better', quality:'aftermarket', priority:'standard', addons:{} };
  var tierDiff = { good:-19, better:0, premium:20 };
  var dom={};

  function $(id){ return document.getElementById(id); }
  function money(v){ v=Math.round(Number(v||0)*100)/100; return '$'+v.toFixed(2); }
  function getModelById(id){ return models.find(m=>m.id===id)||models[0]; }
  function getModelKey(){ return (state.model && state.model.id)||models[0].id; }
  function isOledAvailableKey(k){ return Object.prototype.hasOwnProperty.call(oledSurcharge,k) && oledSurcharge[k]!==null; }

  function basePrice(){ var k=getModelKey(); return (baseBetter[k]||0)+(tierDiff[state.tier]||0); }
  function qualityPrice(){ return state.quality!=='oled'?0:(oledSurcharge[getModelKey()]||0); }
  function getPriorityPrice(){ var p=priorityOptions.find(x=>x.id===state.priority); return p?p.price:0; }
  function getSelectedAddonDetails(){ return addonOptions.filter(o=>state.addons[o.id]).map(o=>({id:o.id, bridge:o.bridge, label:o.label, price:o.price})); }
  function getAddonPrice(){ return getSelectedAddonDetails().reduce((a,b)=>a+Number(b.price||0),0); }
  function computeTotals(){ var b=basePrice(),q=qualityPrice(),p=getPriorityPrice(),a=getAddonPrice(); return {base:b,quality:q,priority:p,addons:a,total:b+q+p+a}; }

  function renderSelect(){
    var frag=document.createDocumentFragment();
    models.forEach(m=>{ var o=document.createElement('option'); o.value=m.id; o.textContent=m.label; frag.appendChild(o); });
    dom.modelSelect.appendChild(frag); dom.modelSelect.value=state.model.id;
  }
  function renderQuality(){
    dom.qualityOptions.innerHTML='';
    var aftermarket=document.createElement('div'); aftermarket.className='radio-item active';
    aftermarket.innerHTML='<input type="radio" name="quality" value="aftermarket" id="quality-aftermarket" checked><label for="quality-aftermarket"><div class="row"><strong>Premium Aftermarket</strong><span class="price-chip">Included</span></div><div class="hint">Excellent value for most customers.</div></label>';
    var oled=document.createElement('div'); oled.className='radio-item';
    oled.innerHTML='<input type="radio" name="quality" value="oled" id="quality-oled"><label for="quality-oled"><div class="row"><strong>OEM-Match OLED</strong><span class="price-chip" id="oledPrice">(+ $0)</span></div><div class="hint">Factory-like vividness (where available).</div></label>';
    dom.qualityOptions.appendChild(aftermarket); dom.qualityOptions.appendChild(oled);
  }
  function renderPriority(){
    dom.priorityOptions.innerHTML='';
    priorityOptions.forEach((opt,i)=>{
      var div=document.createElement('div'); div.className='radio-item'+(i===0?' active':'');
      var id='priority-'+opt.id;
      div.innerHTML='<input type="radio" name="priority" value="'+opt.id+'" id="'+id+'" '+(i===0?'checked':'')+'><label for="'+id+'"><div class="row"><strong>'+opt.label+'</strong><span class="price-chip">'+(opt.price?money(opt.price):'Included')+'</span></div><div class="hint">'+opt.description+'</div></label>';
      dom.priorityOptions.appendChild(div);
    });
  }
  function renderAddons(){
    dom.addonOptions.innerHTML='';
    addonOptions.forEach(opt=>{
      var w=document.createElement('div'); w.className='check-item';
      var id='addon-'+opt.id;
      w.innerHTML='<input type="checkbox" id="'+id+'" value="'+opt.id+'"><label for="'+id+'"><div class="row"><strong>'+opt.label+'</strong><span class="price-chip">'+money(opt.price)+'</span></div><div class="hint">'+opt.description+'</div></label>';
      dom.addonOptions.appendChild(w);
    });
  }

  function syncTier(){
    ['good','better','premium'].forEach(t=>{ var el=$('tab-'+t); if(!el) return; if(state.tier===t){ el.classList.add('active'); el.setAttribute('aria-selected','true'); } else { el.classList.remove('active'); el.setAttribute('aria-selected','false'); }});
    var c=tierCopy[state.tier]; $('tierIndicatorTitle').textContent=c.title; $('tierIndicatorCopy').textContent=c.copy; dom.warrantyNote.textContent=c.note; $('summaryTier').textContent=c.title;
  }
  function ensureQualityAvailability(){
    var k=getModelKey(), avail=isOledAvailableKey(k), oled=$('quality-oled');
    if(!avail){ oled.checked=false; oled.disabled=true; state.quality='aftermarket'; $('quality-aftermarket').checked=true; $('oledPrice').textContent='(N/A)'; }
    else { oled.disabled=false; $('oledPrice').textContent='(+ '+money(oledSurcharge[k])+')'; }
    updateQualityActive();
  }
  function updateQualityActive(){
    dom.qualityOptions.querySelectorAll('.radio-item').forEach(n=>n.classList.remove('active'));
    var sel= state.quality==='oled' ? 'quality-oled' : 'quality-aftermarket';
    var inp=dom.qualityOptions.querySelector('#'+sel); if(inp){ inp.parentElement.classList.add('active'); }
  }
  function updatePriorityActive(){
    dom.priorityOptions.querySelectorAll('input[name="priority"]').forEach(inp=>{
      if(inp.value===state.priority){ inp.checked=true; inp.parentElement.classList.add('active'); } else { inp.parentElement.classList.remove('active'); }
    });
  }
  function updateAddonsActive(){
    addonOptions.forEach(opt=>{ var cb=$('addon-'+opt.id); if(cb) cb.checked=!!state.addons[opt.id]; });
  }
  function updateSummary(){
    var totals=computeTotals();
    $('summaryModel').textContent=(state.model&&state.model.label)||'';
    $('summaryQuality').textContent= state.quality==='oled' ? 'OEM-Match OLED' : 'Premium Aftermarket';
    var p=priorityOptions.find(x=>x.id===state.priority); $('summaryPriority').textContent= p ? (p.label+(p.price?' — '+money(p.price):' — Included')) : 'Standard Queue';
    var addList=getSelectedAddonDetails().map(a=>a.label); $('summaryAddons').textContent= addList.length?addList.join(', '):'None';
    $('priceBase').textContent=money(totals.base); $('priceQuality').textContent=money(totals.quality); $('pricePriority').textContent=money(totals.priority); $('priceAddons').textContent=money(totals.addons);
    $('priceTotal').textContent=money(totals.total); if(dom.floatingTotalAmount) dom.floatingTotalAmount.textContent=money(totals.total);
    $('summaryWarranty').textContent=tierCopy[state.tier].note;
  }

  function siteBase(){
    if(window.location.origin) return window.location.origin.replace(/\/$/,'');
    return (window.location.protocol+'//'+window.location.host).replace(/\/$/,'');
  }

  // Build the URL for your existing bridge
  function buildBridgeUrl(){
    var model=(state.model&&state.model.id)||'14';
    var tier=state.tier; // good|better|premium
    var quality=state.quality; // aftermarket|oled
    var priorityAmount=getPriorityPrice(); // numeric
    var bridgeAddons=getSelectedAddonDetails().map(a=>a.bridge); // ['batt','prot',...]

    var u=siteBase()+'/?npc_gbb=1'
      +'&model='+encodeURIComponent(model)
      +'&tier='+encodeURIComponent(tier)
      +'&quality='+encodeURIComponent(quality)
      +'&priority='+encodeURIComponent(priorityAmount);

    if(bridgeAddons.length){ u+='&addons='+encodeURIComponent(bridgeAddons.join(',')); }
    return u;
  }

  function showStatus(msg,type){
    dom.checkoutStatus.textContent=msg;
    dom.checkoutStatus.classList.remove('hidden','error','success');
    dom.checkoutStatus.classList.add(type==='error'?'error':'success');
  }

  function attachEvents(){
    ['tab-good','tab-better','tab-premium'].forEach(id=>{
      var t=$(id); if(!t) return;
      t.addEventListener('click',()=>{ state.tier=t.dataset.tier; syncTier(); updateSummary(); });
      t.addEventListener('keydown',e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); t.click(); }});
    });

    dom.modelSelect.addEventListener('change', function(){ state.model=getModelById(this.value); ensureQualityAvailability(); updateSummary(); });

    dom.qualityOptions.addEventListener('change', function(e){ if(e.target && e.target.name==='quality'){ state.quality=e.target.value; updateQualityActive(); updateSummary(); }});
    dom.priorityOptions.addEventListener('change', function(e){ if(e.target && e.target.name==='priority'){ state.priority=e.target.value; updatePriorityActive(); updateSummary(); }});

    addonOptions.forEach(opt=>{
      var cb=$('addon-'+opt.id); if(!cb) return;
      cb.addEventListener('change', function(){ if(this.checked){ state.addons[opt.id]=true; } else { delete state.addons[opt.id]; } updateSummary(); });
    });

    $('resetBtn').addEventListener('click', function(){ state={ model:models[0], tier:'better', quality:'aftermarket', priority:'standard', addons:{} }; dom.modelSelect.value=state.model.id; ensureQualityAvailability(); syncTier(); updatePriorityActive(); updateAddonsActive(); updateSummary(); showStatus('Selections reset.','success'); });

    function go(){ var url=buildBridgeUrl(); showStatus('Opening secure checkout…','success'); window.location.href=url; }

    $('checkoutBtn').addEventListener('click', go);
    $('paypalBtn').addEventListener('click', go); // both go through Woo checkout; payment chosen there
    $('floatingCheckoutBtn').addEventListener('click', go);
    $('floatingPayBtn').addEventListener('click', go);
  }

  function cacheDom(){
    dom = {
      modelSelect:$('modelSelect'),
      qualityOptions:$('qualityOptions'),
      priorityOptions:$('priorityOptions'),
      addonOptions:$('addonOptions'),
      summaryModel:$('summaryModel'),
      summaryTier:$('summaryTier'),
      summaryQuality:$('summaryQuality'),
      summaryPriority:$('summaryPriority'),
      summaryAddons:$('summaryAddons'),
      priceBase:$('priceBase'),
      priceQuality:$('priceQuality'),
      pricePriority:$('pricePriority'),
      priceAddons:$('priceAddons'),
      priceTotal:$('priceTotal'),
      floatingCheckoutBtn:$('floatingCheckoutBtn'),
      floatingCheckoutLabel:$('floatingCheckoutLabel'),
      floatingPayBtn:$('floatingPayBtn'),
      floatingTotalAmount:$('floatingTotalAmount'),
      paypalBtn:$('paypalBtn'),
      paypalBtnLabel:$('paypalBtnLabel'),
      summaryWarranty:$('summaryWarranty'),
      warrantyNote:$('warrantyNote'),
      checkoutBtn:$('checkoutBtn'),
      checkoutStatus:$('checkoutStatus'),
      resetBtn:$('resetBtn')
    };
  }

  function init(){
    cacheDom(); renderSelect(); renderQuality(); renderPriority(); renderAddons(); ensureQualityAvailability(); syncTier(); updatePriorityActive(); updateAddonsActive(); updateSummary(); attachEvents();
  }

  document.addEventListener('DOMContentLoaded', init);
})();
</script>
</body>
</html>
